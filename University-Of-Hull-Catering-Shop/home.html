<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Manrope&display=swap" rel="stylesheet">
  <link href="css/home.css" rel="stylesheet" type="text/css">
  <title>University Of Hull Catering Shop</title>

</head>

<body>

  <div class="homeDiv">
    <h1 id="title">Welcome.</h1>
    <br/>
    <h2 id="subtitle">University Catering Service, here for you.</h2>
    <br/>
    <p>We promise to provide you with high-quality, handmade,
      fresh food. You can order any item and pay online
      by PayPal or pay in person at collection.</p>
      <br/>
    <button onclick="document.getElementById('loginModal').style.display='block'" style="width:auto; min-width: 163px; border: 2px solid; border-color: white"  id="loginButton">Login</button>
    <div>
    <button style="width:auto; min-width: 163px; border: 2px solid; border-color: white; visibility: hidden;"  id="logoutButton">Log Out</button>


    </div>
    </div>
  <div id="loginModal" class="modal">
    <form class="modal-content animate" action="index.html" method="post">
      <div class="imgcontainer">
        <span onclick="document.getElementById('loginModal').style.display='none'" class="close"
          title="Close Modal">&times;</span>
        <img src="gallery/logo.png" alt="University-Logo.png" class="avatar">
      </div>

      <div class="container">
        <p id="loginFailed">Login failed - Invalid username or password</p>
        <label for="username"><b>Please enter your User ID or University of Hull Email Address</b></label>
        <input type="text" id="username" placeholder="Enter Username" name="username" required>

        <label for="password"><b>Password</b></label>
        <input type="password" id="password" placeholder="Enter Password" name="password" required>

        <button type="button" onclick="getInfo()">Login</button>
      </div>

    </form>
  </div>


  <script src="js/home.js">

  </script>
  <script>
    let username = localStorage.getItem('currentUserId');

    console.log(username)
    if(username != null){
      console.log('login')
      document.getElementById('title').innerHTML = 'You Are Already Logged In'
      document.getElementById('title').style.color = '#84E900'
      document.getElementById('subtitle').innerHTML = `Hello, ${username}!`
      if (username == 'admin')
        document.getElementById('loginButton').innerHTML = 'Go To Admin Page'
      else
        document.getElementById('loginButton').innerHTML = 'Continue Shopping'
      document.getElementById('loginButton').onclick = function() {
        if (username == 'admin')
          window.location.href = 'admin.html'
        else
          window.location.href = 'index.html'
      }
      document.getElementById('logoutButton').style.visibility = 'visible';
      document.getElementById('logoutButton').onclick = function() {
        localStorage.removeItem('currentUserId');
        window.location.reload();
      }
    }
      
    
    else {
      console.log('no login')        
    }
  </script>
</body>

</html>